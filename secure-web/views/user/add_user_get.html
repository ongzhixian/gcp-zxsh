{% extends "_layouts/_default.html" %}

{% block title %} Add user {% endblock %} 

{% block linktags %}
<meta name="description" content="hci cloud" /> 
{% endblock %}

{% block content %}

<main>
    
    <form class="pure-form pure-form-aligned" enctype="application/x-www-form-urlencoded" method="POST">
        <fieldset>
            <legend>Add user</legend>

            <div class="pure-control-group">
                <label for="input_email">Email</label>
                <input type="email" id="input_email" placeholder="Email" name="input_email" />
                <span class="pure-form-message-inline">This is a required field.</span>
            </div>
            
            <div class="pure-control-group">
                <label for="input_password">Password</label>
                <input type="password" id="input_password" placeholder="Password" name="input_password" autocomplete="new-password" />
                <span class="pure-form-message-inline">This is a required field.</span>
            </div>            
            
            <div class="pure-controls">
                
                <button type="submit" class="pure-button pure-button-primary">Register</button>
                <span class="pure-form-message-inline" id="user_message">{% if user_message is defined %}{{user_message[0].text}}{% endif %}
                </span>
            </div>
            
        </fieldset>
    </form>




</main>

<footer>
    
</footer>
{% endblock %}


{% block scripts %}

<script type="text/javascript">
(function() {
    "use strict";
    
    let p = {
        input_email : document.getElementById("input_email"),

        input_password : document.getElementById("input_password"),

        user_message : document.getElementById("user_message"),

        validateForm : function() {

            if (p.input_email.value.trim().length <= 0)
                return "Email is empty";

            if (p.input_password.value.trim().length <= 0)
                return "Password is empty";

            return "";
        },

        setMessage : function(msg) {
            p.user_message.innerText = msg;
        }
    };

    document.addEventListener("submit", function(e) {
        let validationMessage = p.validateForm();
        if (validationMessage.length > 0) {
            e.preventDefault();            
            console.log("Invalid form: ", validationMessage);

            p.setMessage(validationMessage);

            
        }
        
        return;
    });
}());
</script>

{% endblock %}